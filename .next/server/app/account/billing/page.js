(()=>{var e={};e.id=113,e.ids=[113],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},51587:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>d}),t(6185),t(60564),t(35866);var a=t(23191),r=t(88716),i=t(37922),n=t.n(i),l=t(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["account",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6185)),"/Users/paigesporn/Documents/Github/pulse-glassify-studio/src/app/account/billing/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,60564)),"/Users/paigesporn/Documents/Github/pulse-glassify-studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/paigesporn/Documents/Github/pulse-glassify-studio/src/app/account/billing/page.tsx"],u="/account/billing/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/account/billing/page",pathname:"/account/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27376:(e,s,t)=>{Promise.resolve().then(t.bind(t,7187))},37202:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},37358:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},54659:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7027:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},21405:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},91470:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},7187:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(10326),r=t(17577),i=t(69701),n=t(91664),l=t(29752),c=t(38443),d=t(54659),o=t(37202),u=t(91470),m=t(37358),p=t(28916),h=t(21405),x=t(7027);function g(){let[e,s]=(0,r.useState)(null),[t,g]=(0,r.useState)(!0),[y,b]=(0,r.useState)(!1),j=async()=>{try{let{data:{user:e}}=await i.OQ.auth.getUser();if(!e)return;let{data:t,error:a}=await i.OQ.from("subscription_status").select("*").eq("user_id",e.id).single();if(a||!t){console.error("Error fetching subscription:",a),g(!1);return}let r=v(t.stripe_price_id||"");s({status:t.status||"inactive",current_period_end:t.current_period_end||"",stripe_price_id:t.stripe_price_id||"",plan_name:r.name,amount:r.amount,interval:r.interval})}catch(e){console.error("Error:",e)}finally{g(!1)}},v=e=>({[process.env.NEXT_PUBLIC_STRIPE_STARTER_MONTHLY_PRICE_ID||""]:{name:"Starter",amount:27,interval:"month"},[process.env.NEXT_PUBLIC_STRIPE_STARTER_ANNUAL_PRICE_ID||""]:{name:"Starter",amount:270,interval:"year"},[process.env.NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID||""]:{name:"Agency Pro",amount:97,interval:"month"},[process.env.NEXT_PUBLIC_STRIPE_PRO_ANNUAL_PRICE_ID||""]:{name:"Agency Pro",amount:970,interval:"year"},[process.env.NEXT_PUBLIC_STRIPE_ACCELERATOR_MONTHLY_PRICE_ID||""]:{name:"Accelerator",amount:197,interval:"month"},[process.env.NEXT_PUBLIC_STRIPE_ACCELERATOR_ANNUAL_PRICE_ID||""]:{name:"Accelerator",amount:1970,interval:"year"}})[e]||{name:"Unknown Plan",amount:0,interval:"month"},N=async()=>{b(!0);try{let{data:{user:e}}=await i.OQ.auth.getUser();if(!e)return;let s=await fetch("/api/stripe/create-portal-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id})}),{url:t,error:a}=await s.json();if(a){console.error("Error creating portal session:",a);return}t&&(window.location.href=t)}catch(e){console.error("Error:",e)}finally{b(!1)}};return t?a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-8"}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-32 bg-gray-200 rounded"}),a.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})})}):e?a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Billing & Subscription"}),a.jsx("p",{className:"text-gray-600",children:"Manage your subscription and billing information"})]}),(0,a.jsxs)(l.Zb,{className:"mb-8",children:[a.jsx(l.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(e=>{switch(e){case"active":return a.jsx(d.Z,{className:"w-5 h-5 text-green-500"});case"trialing":return a.jsx(d.Z,{className:"w-5 h-5 text-blue-500"});case"past_due":return a.jsx(o.Z,{className:"w-5 h-5 text-yellow-500"});case"canceled":return a.jsx(u.Z,{className:"w-5 h-5 text-red-500"});default:return a.jsx(u.Z,{className:"w-5 h-5 text-gray-500"})}})(e.status),"Current Plan"]}),(0,a.jsxs)(l.SZ,{children:[e.plan_name," - $",e.amount,"/",e.interval]})]}),(e=>{switch(e){case"active":return a.jsx(c.C,{className:"bg-green-100 text-green-800",children:"Active"});case"trialing":return a.jsx(c.C,{className:"bg-blue-100 text-blue-800",children:"Trial"});case"past_due":return a.jsx(c.C,{className:"bg-yellow-100 text-yellow-800",children:"Past Due"});case"canceled":return a.jsx(c.C,{className:"bg-red-100 text-red-800",children:"Canceled"});default:return a.jsx(c.C,{className:"bg-gray-100 text-gray-800",children:"Inactive"})}})(e.status)]})}),a.jsx(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Next billing: ",new Date(e.current_period_end).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Billed ",e.interval,"ly"]})]})]})})]}),(0,a.jsxs)(l.Zb,{className:"mb-8",children:[(0,a.jsxs)(l.Ol,{children:[a.jsx(l.ll,{children:"Billing Management"}),a.jsx(l.SZ,{children:"Update your payment method, view invoices, or change your plan"})]}),a.jsx(l.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(n.z,{onClick:N,disabled:y,className:"w-full md:w-auto",children:y?(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(h.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Manage Billing"]})}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{children:"• Update payment methods"}),a.jsx("p",{children:"• Download invoices"}),a.jsx("p",{children:"• Change subscription plan"}),a.jsx("p",{children:"• Cancel subscription"})]})]})})]}),"past_due"===e.status&&(0,a.jsxs)(l.Zb,{className:"mb-8 border-yellow-200 bg-yellow-50",children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2 text-yellow-800",children:[a.jsx(o.Z,{className:"w-5 h-5"}),"Payment Required"]})}),(0,a.jsxs)(l.aY,{children:[a.jsx("p",{className:"text-yellow-700 mb-4",children:"Your payment failed. Please update your payment method to continue using the service."}),a.jsx(n.z,{onClick:N,className:"bg-yellow-600 hover:bg-yellow-700",children:"Update Payment Method"})]})]}),"canceled"===e.status&&(0,a.jsxs)(l.Zb,{className:"mb-8 border-red-200 bg-red-50",children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2 text-red-800",children:[a.jsx(u.Z,{className:"w-5 h-5"}),"Subscription Canceled"]})}),(0,a.jsxs)(l.aY,{children:[a.jsx("p",{className:"text-red-700 mb-4",children:"Your subscription has been canceled. You can resubscribe at any time."}),a.jsx(n.z,{onClick:()=>window.location.href="/subscribe",className:"bg-red-600 hover:bg-red-700",children:"Resubscribe"})]})]}),a.jsx("div",{className:"text-center",children:(0,a.jsxs)(n.z,{variant:"outline",onClick:j,disabled:t,children:[a.jsx(h.Z,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),"Refresh Status"]})})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"No Active Subscription"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"You don't have an active subscription. Subscribe to access all features."}),a.jsx(n.z,{onClick:()=>window.location.href="/subscribe",children:"View Plans"})]})})})}},69701:(e,s,t)=>{"use strict";t.d(s,{OQ:()=>a});let a=(0,t(33815).eI)("https://bafqocuimkfjnuhvhsat.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhZnFvY3VpbWtmam51aHZoc2F0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE0NDQ2NTcsImV4cCI6MjA3NzAyMDY1N30.ary_R34tb_jAuM2QddZBpWZM7DktoISmDAtDDDSU0LM",{auth:{storage:void 0,persistSession:!0,autoRefreshToken:!0}})},6185:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/paigesporn/Documents/Github/pulse-glassify-studio/src/app/account/billing/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,899,815,922],()=>t(51587));module.exports=a})();
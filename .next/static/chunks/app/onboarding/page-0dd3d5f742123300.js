(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{3255:function(e,s,t){Promise.resolve().then(t.bind(t,6506))},6506:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return T}});var a=t(7437),r=t(2265),n=t(9376),l=t(9820),i=t(2381),d=t(7204),c=t(279),o=t(5060),u=t(2325),m=t(519),x=t(3448);let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(u.fC,{className:(0,x.cn)("grid gap-2",t),...r,ref:s})});f.displayName=u.fC.displayName;let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(u.ck,{ref:s,className:(0,x.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(u.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});h.displayName=u.ck.displayName;var p=t(721);let g=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(p.Root,{className:(0,x.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...r,ref:s,children:(0,a.jsx)(p.Thumb,{className:(0,x.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});g.displayName=p.Root.displayName;var j=t(3340),b=t(8906),v=t(401),N=t(2805),y=t(7689),w=t(8226),_=t(2660),S=t(6858),k=t(1239);function T(){let e=(0,n.useRouter)(),{toast:s}=(0,j.pm)(),[t,u]=(0,r.useState)(1),[m,x]=(0,r.useState)(!1),[p,T]=(0,r.useState)(null),[C,E]=(0,r.useState)({subscription_status:"incomplete",base_theme:"glass",logo_url:"",favicon_url:"",embedded_mode:!1,navigation_config:{}});(0,r.useEffect)(()=>{R()},[]);let R=async()=>{try{var s;let t=localStorage.getItem("user");if(!t){e.push("/auth");return}let a=JSON.parse(t);if(T(a),(null===(s=a.subscription_status)||void 0===s?void 0:s.status)==="active"){e.push("/dashboard");return}}catch(s){console.error("Error loading user:",s),e.push("/auth")}},O=e=>{E(s=>({...s,...e}))},A=async()=>{try{let e=await fetch("/api/stripe/create-customer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p.email,name:p.name})}),s=await e.json();if(s.error)throw Error(s.error);return s.customer_id}catch(e){throw Error("Failed to create Stripe customer: ".concat(e.message))}},I=async()=>{x(!0);try{let t=await A();if(!(await fetch("/api/subscription/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:p.id,stripe_customer_id:t,status:"trialing"})})).ok)throw Error("Failed to update subscription status");if(!(await fetch("/api/tenant-config/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({owner_type:"agency"===p.role?"agency":"subaccount",owner_id:"agency"===p.role?p.agency_id:p.subaccount_id,navigation_config:C.navigation_config,ui_flags:{base_theme:C.base_theme,logo_url:C.logo_url,favicon_url:C.favicon_url,embedded_mode:C.embedded_mode}})})).ok)throw Error("Failed to create tenant configuration");s({title:"Welcome to PulseGen Studio!",description:"Your account is ready. Redirecting to billing..."}),e.push("/account/billing")}catch(e){s({title:"Setup Error",description:e.message||"Failed to complete onboarding",variant:"destructive"})}finally{x(!1)}};return p?(0,a.jsx)("div",{className:"min-h-screen bg-[var(--color-bg)] flex items-center justify-center p-6",children:(0,a.jsxs)(l.Zb,{className:"w-full max-w-2xl glass-card",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-heading gradient-text mb-2",children:"Welcome to PulseGen Studio"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Step ",t," of ",4,": Let's set up your account"]}),(0,a.jsx)(d.E,{value:t/4*100,className:"mt-4"})]})}),(0,a.jsxs)(l.aY,{children:[(()=>{switch(t){case 1:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(b.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-2xl font-heading gradient-text mb-2",children:"Welcome to PulseGen Studio"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Let's set up your GoHighLevel operating system overlay"})]}),(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsx)("h4",{className:"font-medium mb-4",children:"What you'll get:"}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{children:"Complete UI theme control for GoHighLevel"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{children:"Real-time theme preview and deployment"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{children:"Marketplace to buy/sell themes"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{children:"Project management and support tools"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{children:"Embedded apps inside GoHighLevel"})]})]})]}),(0,a.jsxs)("div",{className:"glass-card p-4 bg-blue-500/10 border-blue-500/20",children:[(0,a.jsxs)("p",{className:"text-sm text-blue-400",children:[(0,a.jsx)("strong",{children:"Account Type:"})," ",(null==p?void 0:p.role)==="agency"?"Agency Owner":"Subaccount User"]}),(0,a.jsxs)("p",{className:"text-sm text-blue-400 mt-1",children:[(0,a.jsx)("strong",{children:"Name:"})," ",null==p?void 0:p.name]})]})]});case 2:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(N.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-2xl font-heading gradient-text mb-2",children:"Base Theme"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Choose your default theme style"})]}),(0,a.jsxs)(f,{value:C.base_theme,onValueChange:e=>O({base_theme:e}),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h,{value:"glass",id:"glass"}),(0,a.jsx)(o._,{htmlFor:"glass",className:"flex-1 cursor-pointer",children:(0,a.jsx)("div",{className:"glass-card p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded backdrop-blur-sm border border-white/10"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Glass Theme"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Modern glassmorphism design"})]})]})})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h,{value:"dark",id:"dark"}),(0,a.jsx)(o._,{htmlFor:"dark",className:"flex-1 cursor-pointer",children:(0,a.jsx)("div",{className:"glass-card p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-800 rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Dark Theme"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sleek dark interface"})]})]})})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h,{value:"light",id:"light"}),(0,a.jsx)(o._,{htmlFor:"light",className:"flex-1 cursor-pointer",children:(0,a.jsx)("div",{className:"glass-card p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Light Theme"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Clean, bright interface"})]})]})})})]})]})]});case 3:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(y.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-2xl font-heading gradient-text mb-2",children:"Branding"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Upload your logo and favicon (optional)"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"logo-url",children:"Logo URL"}),(0,a.jsx)(c.I,{id:"logo-url",value:C.logo_url,onChange:e=>O({logo_url:e.target.value}),placeholder:"https://example.com/logo.png",className:"glass mt-2"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This will replace the default PulseGen logo in your themes"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"favicon-url",children:"Favicon URL"}),(0,a.jsx)(c.I,{id:"favicon-url",value:C.favicon_url,onChange:e=>O({favicon_url:e.target.value}),placeholder:"https://example.com/favicon.ico",className:"glass mt-2"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be used as the browser tab icon"})]})]}),(0,a.jsx)("div",{className:"glass-card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:"Enable Embedded Mode"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow PulseGen apps to run inside GoHighLevel"})]}),(0,a.jsx)(g,{checked:C.embedded_mode,onCheckedChange:e=>O({embedded_mode:e})})]})}),C.embedded_mode&&(0,a.jsxs)("div",{className:"glass-card p-4 bg-blue-500/10 border-blue-500/20",children:[(0,a.jsxs)("p",{className:"text-sm text-blue-400 mb-2",children:[(0,a.jsx)("strong",{children:"Embed Code:"})," Add this to your GoHighLevel custom CSS:"]}),(0,a.jsx)("code",{className:"block p-3 bg-black/20 rounded text-xs font-mono overflow-x-auto",children:'window.addEventListener("message",(e)=>{\nif(e.origin.includes("pulsegenstudio")&&e.data?.type==="PG_THEME"){\nconst{css,js}=e.data.payload;\nlet style=document.querySelector("#pgTheme")||document.createElement("style");\nstyle.id="pgTheme";style.textContent=css;\ndocument.head.appendChild(style);\nif(js)eval(js);\n}});'})]})]});case 4:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(w.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-2xl font-heading gradient-text mb-2",children:"Ready to Go!"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Review your settings and complete setup"})]}),(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsx)("h4",{className:"font-medium mb-4",children:"Setup Summary"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Account Type:"}),(0,a.jsx)("span",{className:"capitalize",children:null==p?void 0:p.role})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Base Theme:"}),(0,a.jsx)("span",{className:"capitalize",children:C.base_theme})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Logo:"}),(0,a.jsx)("span",{children:C.logo_url?"✓ Set":"Not set"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Favicon:"}),(0,a.jsx)("span",{children:C.favicon_url?"✓ Set":"Not set"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Embedded Mode:"}),(0,a.jsx)("span",{children:C.embedded_mode?"✓ Enabled":"Disabled"})]})]})]}),(0,a.jsx)("div",{className:"glass-card p-4 bg-yellow-500/10 border-yellow-500/20",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-400",children:[(0,a.jsx)("strong",{children:"Next:"})," You'll be redirected to set up billing and start your trial."]})})]});default:return null}})(),(0,a.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>{t>1&&u(t-1)},disabled:1===t,className:"glass",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),t<4?(0,a.jsxs)(i.z,{onClick:()=>{t<4&&u(t+1)},className:"btn-primary",children:["Next",(0,a.jsx)(S.Z,{className:"h-4 w-4 ml-2"})]}):(0,a.jsxs)(i.z,{onClick:I,className:"btn-primary",disabled:m,children:[m?"Completing...":"Complete Setup",(0,a.jsx)(k.Z,{className:"h-4 w-4 ml-2"})]})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[var(--color-bg)]",children:(0,a.jsxs)("div",{className:"glass-card p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-pulse-glow mb-4",children:(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full mx-auto"})}),(0,a.jsx)("h2",{className:"text-xl font-heading gradient-text",children:"Loading..."})]})})}},2381:function(e,s,t){"use strict";t.d(s,{z:function(){return c}});var a=t(7437),r=t(2265),n=t(7053),l=t(535),i=t(3448);let d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:c=!1,...o}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(d({variant:r,size:l,className:t})),ref:s,...o})});c.displayName="Button"},9820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var a=t(7437),r=t(2265),n=t(3448);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});l.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},279:function(e,s,t){"use strict";t.d(s,{I:function(){return l}});var a=t(7437),r=t(2265),n=t(3448);let l=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});l.displayName="Input"},5060:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var a=t(7437),r=t(2265),n=t(6394),l=t(535),i=t(3448);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.Root,{ref:s,className:(0,i.cn)(d(),t),...r})});c.displayName=n.Root.displayName},7204:function(e,s,t){"use strict";t.d(s,{E:function(){return i}});var a=t(7437),r=t(2265),n=t(610),l=t(3448);let i=r.forwardRef((e,s)=>{let{className:t,value:r,...i}=e;return(0,a.jsx)(n.fC,{ref:s,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,a.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});i.displayName=n.fC.displayName},3340:function(e,s,t){"use strict";t.d(s,{pm:function(){return m}});var a=t(2265);let r=0,n=new Map,l=e=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,s)},i=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=i(c,e),d.forEach(e=>{e(c)})}function u(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(c);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},3448:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(1994),r=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}}},function(e){e.O(0,[284,672,55,971,117,744],function(){return e(e.s=3255)}),_N_E=e.O()}]);